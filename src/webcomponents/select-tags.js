!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function o(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function r(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n)}function s(e){e.parentNode.removeChild(e)}function c(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function d(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function u(e){return document.createTextNode(e)}function f(){return u(" ")}function h(){return u("")}function m(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function g(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function b(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function x(e,t){t=""+t,e.data!==t&&(e.data=t)}function v(e,t,n){e.classList[n?"add":"remove"](t)}let w;function y(e){w=e}function $(){const e=w;return(t,n)=>{const i=e.$$.callbacks[t];if(i){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);i.slice().forEach(t=>{t.call(e,o)})}}}const k=[],O=Promise.resolve();let _=!1;const N=[],E=[],C=[];function S(){_||(_=!0,O.then(j))}function z(){return S(),O}function M(e){N.push(e)}function A(e){E.push(e)}function j(){const e=new Set;do{for(;k.length;){const e=k.shift();y(e),L(e.$$)}for(;N.length;)N.shift()();for(;E.length;){const t=E.pop();e.has(t)||(t(),e.add(t))}}while(k.length);for(;C.length;)C.pop()();_=!1}function L(e){e.fragment&&(e.update(e.dirty),i(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(A))}function T(a,r,l,s,c,d){const p=w;y(a);const u=r.props||{},f=a.$$={fragment:null,ctx:null,props:d,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(p?p.$$.context:[]),callbacks:n(),dirty:null};let h=!1;var m;f.ctx=l?l(a,u,(e,t)=>{f.ctx&&c(f.ctx[e],f.ctx[e]=t)&&(f.bound[e]&&f.bound[e](t),h&&function(e,t){e.$$.dirty||(k.push(e),S(),e.$$.dirty={}),e.$$.dirty[t]=!0}(a,e))}):u,f.update(),h=!0,i(f.before_render),f.fragment=s(f.ctx),r.target&&(r.hydrate?f.fragment.l((m=r.target,Array.from(m.childNodes))):f.fragment.c(),r.intro&&a.$$.fragment.i&&a.$$.fragment.i(),function(e,n,a){const{fragment:r,on_mount:l,on_destroy:s,after_render:c}=e.$$;r.m(n,a),A(()=>{const n=l.map(t).filter(o);s?s.push(...n):i(n),e.$$.on_mount=[]}),c.forEach(A)}(a,r.target,r.anchor),j()),y(p)}let P;"undefined"!=typeof HTMLElement&&(P=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){var t,n;n=!0,(t=this).$$&&(i(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}});const F="m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z",B="M64.5,122.6c32,0,58.1-26,58.1-58.1S96.5,6.4,64.5,6.4S6.4,32.5,6.4,64.5S32.5,122.6,64.5,122.6z M64.5,14.6    c27.5,0,49.9,22.4,49.9,49.9S92,114.4,64.5,114.4S14.6,92,14.6,64.5S37,14.6,64.5,14.6z",H="m42.7,85.7c0.8,0.8 1.8,1.2 2.9,1.2s2.1-0.4 2.9-1.2l16-16 16,16c0.8,0.8 1.8,1.2 2.9,1.2s2.1-0.4 2.9-1.2c1.6-1.6 1.6-4.2 0-5.8l-16-16 16-16c1.6-1.6 1.6-4.2 0-5.8s-4.2-1.6-5.8,0l-16,16-16-16c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l16,16-16,16c-1.6,1.6-1.6,4.2-1.42109e-14,5.8z";function R(e,t,n){const i=Object.create(e);return i.option=t[n],i}function D(e,t,n){const i=Object.create(e);return i.option=t[n],i}function I(e){var t,n;return{c(){t=d("span"),n=u(e.name),t.id="name-display"},m(e,i){l(e,t,i),r(t,n)},p(e,t){e.name&&x(n,t.name)},d(e){e&&s(t)}}}function K(e){for(var t,n=e.selectedOptions,i=[],o=0;o<n.length;o+=1)i[o]=G(D(e,n,o));return{c(){for(var e=0;e<i.length;e+=1)i[e].c();t=h()},m(e,n){for(var o=0;o<i.length;o+=1)i[o].m(e,n);l(e,t,n)},p(e,o){if(e.selectedOptions||e.deleteIconCircle||e.deleteIcon){n=o.selectedOptions;for(var a=0;a<n.length;a+=1){const r=D(o,n,a);i[a]?i[a].p(e,r):(i[a]=G(r),i[a].c(),i[a].m(t.parentNode,t))}for(;a<i.length;a+=1)i[a].d(1);i.length=n.length}},d(e){c(i,e),e&&s(t)}}}function q(t){var n;return{c(){(n=d("span")).textContent="No options selected yet.",n.className="input-hint"},m(e,t){l(e,n,t)},p:e,d(e){e&&s(n)}}}function J(e){var t,n,o,a;return{c(){t=d("input"),n=f(),(o=d("span")).textContent="ESC to close",t.id="input-filter",b(t,"type","text"),t.className="clickable",t.placeholder="Type to filter...",o.className="input-hint narrow-hint",a=[m(t,"input",e.input_input_handler),m(t,"blur",e.keepFocus),m(t,"keydown",e.handleKeyDown)]},m(i,a){l(i,t,a),t.value=e.filter,M(()=>e.input_binding(t,null)),l(i,n,a),l(i,o,a)},p(e,n){e.filter&&t.value!==n.filter&&(t.value=n.filter),e.items&&(n.input_binding(null,t),n.input_binding(t,null))},d(r){r&&s(t),e.input_binding(null,t),r&&(s(n),s(o)),i(a)}}}function G(e){var t,n,i,o,a,c,h,v,w,y=e.option.name;function $(){return e.click_handler(e)}return{c(){t=d("div"),n=d("span"),i=u(y),o=f(),a=p("svg"),c=p("path"),h=p("path"),n.className="tag-name",b(c,"d",H),b(h,"d",B),b(a,"class","tag-icon"),b(a,"viewBox","0 0 129 129"),t.className="tag",t.title=v=e.option.name,w=m(t,"click",g($))},m(e,s){l(e,t,s),r(t,n),r(n,i),r(t,o),r(t,a),r(a,c),r(a,h)},p(n,o){e=o,n.selectedOptions&&y!==(y=e.option.name)&&x(i,y),n.selectedOptions&&v!==(v=e.option.name)&&(t.title=v)},d(e){e&&s(t),w()}}}function Q(e){var t;function n(e){return e.options&&0!==e.options.length?U:V}var i=n(e),o=i(e);return{c(){t=d("div"),o.c(),t.id="options-container",t.className="clickable"},m(e,n){l(e,t,n),o.m(t,null)},p(e,a){i===(i=n(a))&&o?o.p(e,a):(o.d(1),(o=i(a))&&(o.c(),o.m(t,null)))},d(e){e&&s(t),o.d()}}}function U(e){for(var t,n,o,a,p,u,h=e.selectables,b=[],x=0;x<h.length;x+=1)b[x]=X(R(e,h,x));return{c(){for(var i=0;i<b.length;i+=1)b[i].c();t=f(),n=d("div"),(o=d("span")).textContent="Select All",a=f(),(p=d("span")).textContent="Select None",n.id="select-controls-container",u=[m(o,"click",g(e.click_handler_2)),m(p,"click",g(e.click_handler_3))]},m(e,i){for(var s=0;s<b.length;s+=1)b[s].m(e,i);l(e,t,i),l(e,n,i),r(n,o),r(n,a),r(n,p)},p(e,n){if(e.displayOptions||e.selectables||e.selectedOptions||e.renderOption){h=n.selectables;for(var i=0;i<h.length;i+=1){const o=R(n,h,i);b[i]?b[i].p(e,o):(b[i]=X(o),b[i].c(),b[i].m(t.parentNode,t))}for(;i<b.length;i+=1)b[i].d(1);b.length=h.length}},d(e){c(b,e),e&&(s(t),s(n)),i(u)}}}function V(t){var n;return{c(){(n=d("p")).textContent="No options received."},m(e,t){l(e,n,t)},p:e,d(e){e&&s(n)}}}function W(e){var t,n,i,o,a=e.renderOption(e.option);function c(){return e.click_handler_1(e)}return{c(){t=d("div"),n=d("p"),i=u(a),n.className="option-text clickable",t.className="single-option clickable",v(t,"selected-option",e.selectedOptions.includes(e.option)),o=m(t,"click",c)},m(e,o){l(e,t,o),r(t,n),r(n,i)},p(n,o){e=o,n.selectables&&a!==(a=e.renderOption(e.option))&&x(i,a),(n.selectedOptions||n.selectables)&&v(t,"selected-option",e.selectedOptions.includes(e.option))},d(e){e&&s(t),o()}}}function X(e){var t,n=e.displayOptions.includes(e.option)&&W(e);return{c(){n&&n.c(),t=h()},m(e,i){n&&n.m(e,i),l(e,t,i)},p(e,i){i.displayOptions.includes(i.option)?n?n.p(e,i):((n=W(i)).c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&s(t)}}}function Y(t){var n,i,o,a,c,u,h,g,x,w,y=""!==t.name&&I(t);function $(e){return e.panelOpen?J:0===e.selectedOptions.length?q:e.selectedOptions.length>0?K:void 0}var k=$(t),O=k&&k(t),_=t.panelOpen&&Q(t);return{c(){n=d("section"),y&&y.c(),i=f(),o=d("div"),a=d("div"),O&&O.c(),c=f(),u=d("div"),h=p("svg"),g=p("path"),x=f(),_&&_.c(),this.c=e,a.id="text-container",v(a,"disabled",t.disabled),b(g,"d",F),b(h,"id","arrow-icon"),b(h,"viewBox","0 0 129 129"),v(h,"rotate-icon",t.panelOpen),u.id="icon-container",v(u,"icon-panel-open",t.panelOpen),v(u,"disabled",t.disabled),o.className="tags-container clickable",v(o,"tags-container-open",t.panelOpen),v(o,"disabled",t.disabled),n.id="tags-component-container",w=m(o,"click",t.togglePanel)},m(e,s){l(e,n,s),y&&y.m(n,null),r(n,i),r(n,o),r(o,a),O&&O.m(a,null),r(o,c),r(o,u),r(u,h),r(h,g),M(()=>t.div2_binding(o,null)),r(n,x),_&&_.m(n,null)},p(e,t){""!==t.name?y?y.p(e,t):((y=I(t)).c(),y.m(n,i)):y&&(y.d(1),y=null),k===(k=$(t))&&O?O.p(e,t):(O&&O.d(1),(O=k&&k(t))&&(O.c(),O.m(a,null))),e.disabled&&v(a,"disabled",t.disabled),e.panelOpen&&(v(h,"rotate-icon",t.panelOpen),v(u,"icon-panel-open",t.panelOpen)),e.disabled&&v(u,"disabled",t.disabled),e.items&&(t.div2_binding(null,o),t.div2_binding(o,null)),e.panelOpen&&v(o,"tags-container-open",t.panelOpen),e.disabled&&v(o,"disabled",t.disabled),t.panelOpen?_?_.p(e,t):((_=Q(t)).c(),_.m(n,null)):_&&(_.d(1),_=null)},i:e,o:e,d(e){e&&s(n),y&&y.d(),O&&O.d(),t.div2_binding(null,o),_&&_.d(),w()}}}function Z(e,t,n){let{options:i,name:o="",controlname:a="options",defaults:r="",disabled:l=!1}=t;let s,c,d=!1,p=[],u="";const f=$(),h=async()=>{if(!l)return n("panelOpen",d=!d),await z(),n("filter",u=""),d?(c.focus(),window.setTimeout(()=>window.addEventListener("click",m),0)):window.removeEventListener("click",m)},m=e=>{e.composedPath()[0].classList.contains("clickable")||h()},g=async e=>{p[e.id].checked=!p[e.id].checked,n("selectables",p),await z(),b()},b=()=>{f("submit",{controlname:a,selected:w.map(e=>e.name)})},x=async()=>{n("selectables",p=p.map(e=>({...e,checked:!0}))),await z(),h(),b()},v=async()=>{w.forEach(e=>{p[e.id].checked=!1,n("selectables",p)}),await z(),h(),b()};let w,y;return e.$set=(e=>{"options"in e&&n("options",i=e.options),"name"in e&&n("name",o=e.name),"controlname"in e&&n("controlname",a=e.controlname),"defaults"in e&&n("defaults",r=e.defaults),"disabled"in e&&n("disabled",l=e.disabled)}),e.$$.update=((e={options:1,defaults:1,selectables:1,filter:1})=>{(e.options||e.defaults)&&(i||r)&&(()=>{"string"==typeof r&&""!==r&&n("defaults",r=r.split(","));try{const e=JSON.parse(i);if(e===Object(e)&&!1===Array.isArray(e))return void n("selectables",p=Object.keys(e).map((t,n)=>({name:t,count:e[t],id:n,checked:!1})));if(e===Object(e)&&!0===Array.isArray(e))n("selectables",p=e.map((e,t)=>({id:t,checked:r.includes(e),name:e})))}catch(e){const t=i.split(",");n("selectables",p=t.map((e,t)=>({id:t,checked:r.includes(e),name:e})))}})(),e.selectables&&n("selectedOptions",w=p.filter(e=>!0===e.checked)),(e.selectables||e.filter)&&n("displayOptions",y=p.filter(e=>e.name.match(new RegExp(u,"gi"))))}),{options:i,name:o,controlname:a,defaults:r,disabled:l,panelOpen:d,selectables:p,filter:u,multiSelect:s,inputFilter:c,togglePanel:h,keepFocus:()=>{setTimeout(()=>{c&&c.focus()},10)},handleKeyDown:e=>{27===e.keyCode&&h()},toggleOption:g,renderOption:e=>e.count?`${e.name} (${e.count})`:`${e.name}`,selectAll:x,deselectAll:v,selectedOptions:w,displayOptions:y,input_input_handler:function(){u=this.value,n("filter",u)},input_binding:function(e,t){n("inputFilter",c=e)},click_handler:function({option:e}){return g(e)},div2_binding:function(e,t){n("multiSelect",s=e)},click_handler_1:function({option:e}){return g(e)},click_handler_2:function(){return x()},click_handler_3:function(){return v()}}}customElements.define("select-tags",class extends P{constructor(e){super(),this.shadowRoot.innerHTML="<style>:host{all:initial;display:flex;contain:style}#tags-component-container{position:relative;min-height:var(--height, 40px);max-height:var(--height, 40px);width:100%;min-width:var(--width, 100%);max-width:var(--width, 100%)}.tags-container{box-sizing:border-box;background:white;border:1px solid lightgrey;border-radius:4px;border-top-left-radius:0;display:flex;overflow:hidden;width:100%;cursor:pointer;min-height:var(--height, 40px)}.tags-container-open{border-bottom-left-radius:0;border-bottom-right-radius:0}#text-container{display:flex;align-items:center;user-select:none;-webkit-user-select:none;flex:.9;min-width:0;padding:0 5px;flex-flow:row wrap;max-height:var(--height, 40px);overflow:auto;overflow-x:hidden}#icon-container{display:flex;align-items:center;justify-content:center;border-left:1px solid lightgrey;width:100%;min-width:24px;transition:all .2s ease-in-out;flex:.1}#icon-container:hover{background:rgba(230, 230, 230, 0.4)}.icon-panel-open{background:rgba(230, 230, 230, 0.8)}#name-display{position:absolute;box-sizing:border-box;height:18px;top:-17px;left:0;font-family:'Menlo', monospace;font-size:10px;font-weight:600;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;border:1px solid lightgrey;border-radius:2px;border-bottom-left-radius:0;border-bottom-right-radius:0;padding:2px;max-width:calc(var(--width, 100%) - 10%)}#arrow-icon{width:14px;height:14px;transition:all .2s ease-in-out}.rotate-icon{transform:rotate(180deg)}#options-container{background:white;position:absolute;width:100%;min-width:var(--width, 100%);max-width:var(--width, 100%);max-height:200px;border:1px solid lightgrey;border-radius:10px;border-top:none;border-top-left-radius:0;border-top-right-radius:0;transition:all .2s ease-in-out;display:flex;flex-direction:column;overflow:auto;z-index:10;box-sizing:border-box}#select-controls-container{position:sticky;bottom:0;background:white;display:flex;justify-content:space-around;border-top:1px solid lightgrey}#select-controls-container>span{font-family:'Menlo', monospace;font-size:10px;background:rgba(164, 212, 180, 0.6);padding:6px;margin:4px;border-radius:4px;transition:all .2s ease-in-out;opacity:.8;cursor:pointer}#select-controls-container>span:hover{opacity:1}#input-filter{height:100%;width:100%;border:none;outline:none;margin:0 0 0 5px;font-family:'Menlo', monospace;font-size:10px;flex:.8}.input-hint{font-family:'Menlo', monospace;font-size:8px;color:grey}.narrow-hint{flex:.2}.single-option{display:flex;padding:4px;padding-left:1rem;cursor:pointer;min-height:20px;max-height:20px;user-select:none;-webkit-user-select:none}.single-option:hover{background:rgba(164, 212, 180, 0.1)}.option-text{margin:0;font-family:'Menlo', monospace;font-size:10px}.selected-option{background:rgba(164, 212, 180, 0.6)}.disabled{background:rgba(211, 211, 211, 0.3);cursor:not-allowed}.tag{min-height:20px;max-height:20px;max-width:100px;display:flex;align-items:center;padding:2px;border-radius:6px;background:rgba(85, 184, 128, 0.8);margin:2px}.tag-name{font-family:'Menlo', monospace;font-size:14px;color:white;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.tag-icon{min-width:16px;max-width:16px;min-height:16px;max-height:16px;margin-left:4px;fill:white;transition:all .2s ease-in-out;opacity:.8}.tag:hover>.tag-icon{transform:scale(1.1);opacity:1}</style>",T(this,{target:this.shadowRoot},Z,Y,a,["options","name","controlname","defaults","disabled"]),e&&(e.target&&l(e.target,this,e.anchor),e.props&&(this.$set(e.props),j()))}static get observedAttributes(){return["options","name","controlname","defaults","disabled"]}get options(){return this.$$.ctx.options}set options(e){this.$set({options:e}),j()}get name(){return this.$$.ctx.name}set name(e){this.$set({name:e}),j()}get controlname(){return this.$$.ctx.controlname}set controlname(e){this.$set({controlname:e}),j()}get defaults(){return this.$$.ctx.defaults}set defaults(e){this.$set({defaults:e}),j()}get disabled(){return this.$$.ctx.disabled}set disabled(e){this.$set({disabled:e}),j()}})}();
//# sourceMappingURL=select-tags.js.map
