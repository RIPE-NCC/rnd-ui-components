!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function i(e){e.forEach(t)}function o(e){return"function"==typeof e}function l(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function a(e,t){e.appendChild(t)}function r(e,t,n){e.insertBefore(t,n)}function s(e){e.parentNode.removeChild(e)}function c(e){return document.createElement(e)}function d(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function p(e){return document.createTextNode(e)}function u(){return p(" ")}function h(){return p("")}function f(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function m(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function g(e,t){t=""+t,e.data!==t&&(e.data=t)}function b(e,t,n){e.classList[n?"add":"remove"](t)}let x;function v(e){x=e}function y(){const e=x;return(t,n)=>{const i=e.$$.callbacks[t];if(i){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);i.slice().forEach(t=>{t.call(e,o)})}}}const $=[],w=Promise.resolve();let k=!1;const O=[],_=[],E=[];function N(){k||(k=!0,w.then(M))}function C(){return N(),w}function z(e){O.push(e)}function L(e){_.push(e)}function M(){const e=new Set;do{for(;$.length;){const e=$.shift();v(e),j(e.$$)}for(;O.length;)O.shift()();for(;_.length;){const t=_.pop();e.has(t)||(t(),e.add(t))}}while($.length);for(;E.length;)E.pop()();k=!1}function j(e){e.fragment&&(e.update(e.dirty),i(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(L))}function A(l,a,r,s,c,d){const p=x;v(l);const u=a.props||{},h=l.$$={fragment:null,ctx:null,props:d,update:e,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(p?p.$$.context:[]),callbacks:n(),dirty:null};let f=!1;var m;h.ctx=r?r(l,u,(e,t)=>{h.ctx&&c(h.ctx[e],h.ctx[e]=t)&&(h.bound[e]&&h.bound[e](t),f&&function(e,t){e.$$.dirty||($.push(e),N(),e.$$.dirty={}),e.$$.dirty[t]=!0}(l,e))}):u,h.update(),f=!0,i(h.before_render),h.fragment=s(h.ctx),a.target&&(a.hydrate?h.fragment.l((m=a.target,Array.from(m.childNodes))):h.fragment.c(),a.intro&&l.$$.fragment.i&&l.$$.fragment.i(),function(e,n,l){const{fragment:a,on_mount:r,on_destroy:s,after_render:c}=e.$$;a.m(n,l),L(()=>{const n=r.map(t).filter(o);s?s.push(...n):i(n),e.$$.on_mount=[]}),c.forEach(L)}(l,a.target,a.anchor),M()),v(p)}let D;"undefined"!=typeof HTMLElement&&(D=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}$destroy(){var t,n;n=!0,(t=this).$$&&(i(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}});const S="m121.3,34.6c-1.6-1.6-4.2-1.6-5.8,0l-51,51.1-51.1-51.1c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l53.9,53.9c0.8,0.8 1.8,1.2 2.9,1.2 1,0 2.1-0.4 2.9-1.2l53.9-53.9c1.7-1.6 1.7-4.2 0.1-5.8z";function T(e,t,n){const i=Object.create(e);return i.option=t[n],i.each_value=t,i.option_index=n,i}function P(e){var t,n,o,l;return{c(){t=c("input"),n=u(),(o=c("span")).textContent="ESC to close",m(t,"type","text"),t.id="input-filter",t.className="clickable",t.placeholder="Type to filter...",o.id="input-hint",l=[f(t,"input",e.input_input_handler),f(t,"blur",e.keepFocus),f(t,"keydown",e.handleKeyDown)]},m(i,l){r(i,t,l),t.value=e.filter,z(()=>e.input_binding(t,null)),r(i,n,l),r(i,o,l)},p(e,n){e.filter&&t.value!==n.filter&&(t.value=n.filter),e.items&&(n.input_binding(null,t),n.input_binding(t,null))},d(a){a&&s(t),e.input_binding(null,t),a&&(s(n),s(o)),i(l)}}}function F(e){var t,n,i,o,l=e.textDisplay(),d=e.name&&H(e);return{c(){d&&d.c(),t=u(),n=c("span"),i=p(l),n.id="text-display",o=f(n,"click",e.togglePanel)},m(e,o){d&&d.m(e,o),r(e,t,o),r(e,n,o),a(n,i)},p(e,n){n.name?d?d.p(e,n):((d=H(n)).c(),d.m(t.parentNode,t)):d&&(d.d(1),d=null),e.textDisplay&&l!==(l=n.textDisplay())&&g(i,l)},d(e){d&&d.d(e),e&&(s(t),s(n)),o()}}}function H(e){var t,n,i;return{c(){t=c("span"),n=p(e.name),t.id="name-display",i=f(t,"click",e.togglePanel)},m(e,i){r(e,t,i),a(t,n)},p(e,t){e.name&&g(n,t.name)},d(e){e&&s(t),i()}}}function R(e){var t;function n(e){return e.options&&0!==e.options.length?B:K}var i=n(e),o=i(e);return{c(){t=c("div"),o.c(),t.id="options-container",t.className="clickable"},m(e,n){r(e,t,n),o.m(t,null)},p(e,l){i===(i=n(l))&&o?o.p(e,l):(o.d(1),(o=i(l))&&(o.c(),o.m(t,null)))},d(e){e&&s(t),o.d()}}}function B(e){for(var t,n=e.selectables,i=[],o=0;o<n.length;o+=1)i[o]=J(T(e,n,o));return{c(){for(var e=0;e<i.length;e+=1)i[e].c();t=h()},m(e,n){for(var o=0;o<i.length;o+=1)i[o].m(e,n);r(e,t,n)},p(e,o){if(e.displayOptions||e.selectables||e.selectedOptions||e.renderOption){n=o.selectables;for(var l=0;l<n.length;l+=1){const a=T(o,n,l);i[l]?i[l].p(e,a):(i[l]=J(a),i[l].c(),i[l].m(t.parentNode,t))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(e){!function(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}(i,e),e&&s(t)}}}function K(t){var n;return{c(){(n=c("p")).textContent="No options received."},m(e,t){r(e,n,t)},p:e,d(e){e&&s(n)}}}function q(e){var t,n,o,l,d,h,x,v=e.renderOption(e.option);function y(){e.input_change_handler.call(n,e)}function $(){return e.click_handler(e)}return{c(){t=c("div"),n=c("input"),o=u(),l=c("p"),d=p(v),h=u(),m(n,"type","checkbox"),n.className="option-checkbox clickable",l.className="option-text clickable",t.className="single-option clickable",b(t,"selected-option",e.selectedOptions.includes(e.option)),x=[f(n,"change",y),f(t,"click",$)]},m(i,s){r(i,t,s),a(t,n),n.checked=e.option.checked,a(t,o),a(t,l),a(l,d),a(t,h)},p(i,o){e=o,i.selectables&&(n.checked=e.option.checked),i.selectables&&v!==(v=e.renderOption(e.option))&&g(d,v),(i.selectedOptions||i.selectables)&&b(t,"selected-option",e.selectedOptions.includes(e.option))},d(e){e&&s(t),i(x)}}}function J(e){var t,n=e.displayOptions.includes(e.option)&&q(e);return{c(){n&&n.c(),t=h()},m(e,i){n&&n.m(e,i),r(e,t,i)},p(e,i){i.displayOptions.includes(i.option)?n?n.p(e,i):((n=q(i)).c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&s(t)}}}function G(t){var n,i,o,l,p,h,g,x,v;function y(e){return e.panelOpen?P:F}var $=y(t),w=$(t),k=t.panelOpen&&R(t);return{c(){n=c("section"),i=c("div"),o=c("div"),w.c(),l=u(),p=c("div"),h=d("svg"),g=d("path"),x=u(),k&&k.c(),this.c=e,o.id="text-container",b(o,"disabled",t.disabled),m(g,"d",S),m(h,"id","arrow-icon"),m(h,"viewBox","0 0 129 129"),b(h,"rotate-icon",t.panelOpen),p.id="icon-container",b(p,"icon-panel-open",t.panelOpen),b(p,"disabled",t.disabled),i.className="ms-container clickable",b(i,"ms-container-open",t.panelOpen),b(i,"disabled",t.disabled),n.id="ms-component-container",v=f(p,"click",t.togglePanel)},m(e,s){r(e,n,s),a(n,i),a(i,o),w.m(o,null),a(i,l),a(i,p),a(p,h),a(h,g),z(()=>t.div2_binding(i,null)),a(n,x),k&&k.m(n,null)},p(e,t){$===($=y(t))&&w?w.p(e,t):(w.d(1),(w=$(t))&&(w.c(),w.m(o,null))),e.disabled&&b(o,"disabled",t.disabled),e.panelOpen&&(b(h,"rotate-icon",t.panelOpen),b(p,"icon-panel-open",t.panelOpen)),e.disabled&&b(p,"disabled",t.disabled),e.items&&(t.div2_binding(null,i),t.div2_binding(i,null)),e.panelOpen&&b(i,"ms-container-open",t.panelOpen),e.disabled&&b(i,"disabled",t.disabled),t.panelOpen?k?k.p(e,t):((k=R(t)).c(),k.m(n,null)):k&&(k.d(1),k=null)},i:e,o:e,d(e){e&&s(n),w.d(),t.div2_binding(null,i),k&&k.d(),v()}}}function I(e,t,n){let{options:i,name:o="",controlname:l="options",defaults:a="",disabled:r=!1}=t;let s,c,d=!1,p=[],u="";const h=y(),f=async()=>{if(!r)return n("panelOpen",d=!d),await C(),d?(c.focus(),window.setTimeout(()=>window.addEventListener("click",m),0)):window.removeEventListener("click",m)},m=e=>{e.composedPath()[0].classList.contains("clickable")||f()},g=async e=>{p[e.id].checked=!p[e.id].checked,n("selectables",p),await C(),b()},b=()=>{h("submit",{controlname:l,selected:x.map(e=>e.name)})};let x,v,$;return e.$set=(e=>{"options"in e&&n("options",i=e.options),"name"in e&&n("name",o=e.name),"controlname"in e&&n("controlname",l=e.controlname),"defaults"in e&&n("defaults",a=e.defaults),"disabled"in e&&n("disabled",r=e.disabled)}),e.$$.update=((e={options:1,defaults:1,selectables:1,filter:1,selectedOptions:1})=>{(e.options||e.defaults)&&(i||a)&&(()=>{"string"==typeof a&&""!==a&&n("defaults",a=a.split(","));try{const e=JSON.parse(i);if(e===Object(e)&&!1===Array.isArray(e))return void n("selectables",p=Object.keys(e).map((t,n)=>({name:t,count:e[t],id:n,checked:!1})));if(e===Object(e)&&!0===Array.isArray(e))n("selectables",p=e.map((e,t)=>({id:t,checked:a.includes(e),name:e})))}catch(e){const t=i.split(",");n("selectables",p=t.map((e,t)=>({id:t,checked:a.includes(e),name:e})))}})(),e.selectables&&n("selectedOptions",x=p.filter(e=>!0===e.checked)),(e.selectables||e.filter)&&n("displayOptions",v=p.filter(e=>e.name.match(new RegExp(u,"gi")))),e.selectedOptions&&n("textDisplay",$=(()=>{return`${x.length} selected`}))}),{options:i,name:o,controlname:l,defaults:a,disabled:r,panelOpen:d,selectables:p,filter:u,multiSelect:s,inputFilter:c,togglePanel:f,keepFocus:()=>{setTimeout(()=>{c&&c.focus()},10)},handleKeyDown:e=>{27===e.keyCode&&f()},toggleOption:g,renderOption:e=>e.count?`${e.name} (${e.count})`:`${e.name}`,selectedOptions:x,displayOptions:v,textDisplay:$,input_input_handler:function(){u=this.value,n("filter",u)},input_binding:function(e,t){n("inputFilter",c=e)},div2_binding:function(e,t){n("multiSelect",s=e)},input_change_handler:function({option:e,each_value:t,option_index:i}){t[i].checked=this.checked,n("selectables",p)},click_handler:function({option:e}){return g(e)}}}customElements.define("multi-select",class extends D{constructor(e){super(),this.shadowRoot.innerHTML="<style>:host{all:initial;display:flex;contain:style}#ms-component-container{position:relative;min-height:var(--height, 20px);max-height:var(--height, 20px);width:100%;min-width:var(--width, 200px);max-width:var(--width, 200px)}.ms-container{box-sizing:border-box;background:white;border:1px solid lightgrey;border-radius:4px;display:flex;overflow:hidden;width:100%;height:100%;cursor:pointer}.ms-container-open{border-bottom-left-radius:0;border-bottom-right-radius:0}#text-container{display:flex;align-items:center;justify-content:space-around;user-select:none;-webkit-user-select:none;flex:.9;min-width:0;padding:0 5px}#icon-container{display:flex;align-items:center;justify-content:center;border-left:1px solid lightgrey;width:100%;min-width:24px;transition:all .2s ease-in-out;flex:.1}#icon-container:hover{background:rgba(230, 230, 230, 0.4)}.icon-panel-open{background:rgba(230, 230, 230, 0.8)}#name-display{font-family:'Menlo', monospace;font-size:10px;font-weight:600;line-height:var(--height, 20px);text-overflow:ellipsis;white-space:nowrap;overflow:hidden;flex:.6}#text-display{height:100%;margin:0;font-family:'Menlo', monospace;font-size:8px;line-height:var(--height, 20px);text-align:center;flex:.4}#arrow-icon{width:14px;height:14px;transition:all .2s ease-in-out}.rotate-icon{transform:rotate(180deg)}#options-container{background:white;position:absolute;width:100%;min-width:var(--width, 200px);max-width:var(--width, 200px);height:100%;min-height:var(--width, 200px);max-height:var(--width, 200px);border:1px solid lightgrey;border-radius:10px;border-top:none;border-top-left-radius:0;border-top-right-radius:0;transition:all .2s ease-in-out;display:flex;flex-direction:column;overflow:auto;z-index:10;box-sizing:border-box}#input-filter{height:100%;line-height:var(--height, 20px);width:100%;border:none;outline:none;margin:0 0 0 5px;font-family:'Menlo', monospace;font-size:10px}#input-hint{font-family:'Menlo', monospace;font-size:6px;color:grey}.single-option{display:flex;padding:4px;cursor:pointer;min-height:20px;max-height:20px;user-select:none;-webkit-user-select:none}.single-option:hover{background:rgba(164, 212, 180, 0.1)}.option-text{margin:0;font-family:'Menlo', monospace;font-size:10px}.selected-option{background:rgba(164, 212, 180, 0.6)}.option-checkbox{cursor:pointer;margin:0 10px 0 10px}.disabled{background:rgba(211, 211, 211, 0.3);cursor:not-allowed}</style>",A(this,{target:this.shadowRoot},I,G,l,["options","name","controlname","defaults","disabled"]),e&&(e.target&&r(e.target,this,e.anchor),e.props&&(this.$set(e.props),M()))}static get observedAttributes(){return["options","name","controlname","defaults","disabled"]}get options(){return this.$$.ctx.options}set options(e){this.$set({options:e}),M()}get name(){return this.$$.ctx.name}set name(e){this.$set({name:e}),M()}get controlname(){return this.$$.ctx.controlname}set controlname(e){this.$set({controlname:e}),M()}get defaults(){return this.$$.ctx.defaults}set defaults(e){this.$set({defaults:e}),M()}get disabled(){return this.$$.ctx.disabled}set disabled(e){this.$set({disabled:e}),M()}})}();
//# sourceMappingURL=multi-select.js.map
