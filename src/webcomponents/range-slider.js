!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function r(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n)}function s(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function u(){return d(" ")}function p(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function g(t,e,n){t.style.setProperty(e,n)}let f;function h(t){f=t}function x(t){(function(){if(!f)throw new Error("Function called outside component initialization");return f})().$$.on_mount.push(t)}function v(){const t=f;return(e,n)=>{const i=t.$$.callbacks[e];if(i){const r=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);i.slice().forEach(e=>{e.call(t,r)})}}}const k=[],b=Promise.resolve();let $=!1;const y=[],_=[],w=[];function T(){$||($=!0,b.then(E))}function F(t){y.push(t)}function N(t){_.push(t)}function E(){const t=new Set;do{for(;k.length;){const t=k.shift();h(t),M(t.$$)}for(;y.length;)y.shift()();for(;_.length;){const e=_.pop();t.has(e)||(e(),t.add(e))}}while(k.length);for(;w.length;)w.pop()();$=!1}function M(t){t.fragment&&(t.update(t.dirty),i(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(N))}function D(o,a,l,s,c,d){const u=f;h(o);const p=a.props||{},m=o.$$={fragment:null,ctx:null,props:d,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:null};let g=!1;var x;m.ctx=l?l(o,p,(t,e)=>{m.ctx&&c(m.ctx[t],m.ctx[t]=e)&&(m.bound[t]&&m.bound[t](e),g&&function(t,e){t.$$.dirty||(k.push(t),T(),t.$$.dirty={}),t.$$.dirty[e]=!0}(o,t))}):p,m.update(),g=!0,i(m.before_render),m.fragment=s(m.ctx),a.target&&(a.hydrate?m.fragment.l((x=a.target,Array.from(x.childNodes))):m.fragment.c(),a.intro&&o.$$.fragment.i&&o.$$.fragment.i(),function(t,n,o){const{fragment:a,on_mount:l,on_destroy:s,after_render:c}=t.$$;a.m(n,o),N(()=>{const n=l.map(e).filter(r);s?s.push(...n):i(n),t.$$.on_mount=[]}),c.forEach(N)}(o,a.target,a.anchor),E()),h(u)}let O;function S(t,e,n){const i=Object.create(t);return i.tick=e[n],i}function C(t){var e,n,i,r,o,p,g,f=t.renderTooltip(t.min),h=t.renderTooltip(t.max);return{c(){e=c("div"),n=c("span"),i=d(f),r=u(),o=c("div"),p=c("span"),g=d(h),e.className="tooltip tooltip-rmin",o.className="tooltip tooltip-rmax"},m(t,s){l(t,e,s),a(e,n),a(n,i),l(t,r,s),l(t,o,s),a(o,p),a(p,g)},p(t,e){t.min&&f!==(f=e.renderTooltip(e.min))&&m(i,f),t.max&&h!==(h=e.renderTooltip(e.max))&&m(g,h)},d(t){t&&(s(e),s(r),s(o))}}}function L(t){var e,n,i,r=t.renderTooltip(t.min);return{c(){e=c("div"),n=c("span"),i=d(r),e.className="tooltip"},m(t,r){l(t,e,r),a(e,n),a(n,i)},p(t,e){t.min&&r!==(r=e.renderTooltip(e.min))&&m(i,r)},d(t){t&&s(e)}}}function P(t){var e,n,i,r=t.renderTooltip(t.min);return{c(){e=c("div"),n=c("span"),i=d(r),e.className="tooltip"},m(t,r){l(t,e,r),a(e,n),a(n,i)},p(t,e){t.min&&r!==(r=e.renderTooltip(e.min))&&m(i,r)},d(t){t&&s(e)}}}function V(t){var e,n,i,r,o,p=t.renderTickValue(t.tick.val);return{c(){e=c("span"),n=d("^"),i=u(),r=c("span"),o=d(p),g(e,"left",t.tick.pos+"%"),g(e,"top","-4px"),e.className="tick",g(r,"left",t.tick.pos+"%"),r.className="tick-val"},m(t,s){l(t,e,s),a(e,n),l(t,i,s),l(t,r,s),a(r,o)},p(t,n){t.ticks&&g(e,"left",n.tick.pos+"%"),t.ticks&&p!==(p=n.renderTickValue(n.tick.val))&&m(o,p),t.ticks&&g(r,"left",n.tick.pos+"%")},d(t){t&&(s(e),s(i),s(r))}}}function I(t){var e,n,i,r,o,p=t.renderTickValue(t.tick.val);return{c(){e=c("span"),n=d("^"),i=u(),r=c("span"),o=d(p),g(e,"left",t.tick.pos+"%"),g(e,"top","-4px"),e.className="tick",g(r,"left",t.tick.pos+"%"),r.className="tick-val"},m(t,s){l(t,e,s),a(e,n),l(t,i,s),l(t,r,s),a(r,o)},p(t,n){t.ticks&&g(e,"left",n.tick.pos+"%"),t.ticks&&p!==(p=n.renderTickValue(n.tick.val))&&m(o,p),t.ticks&&g(r,"left",n.tick.pos+"%")},d(t){t&&(s(e),s(i),s(r))}}}function R(t){var e,n,i,r,o,p,f=t.renderTickValue(t.tick.val);return{c(){e=c("span"),n=d("^"),i=u(),r=c("span"),o=d(f),p=u(),g(e,"left",t.tick.pos+"%"),g(e,"top","-4px"),e.className="tick",g(r,"left",t.tick.pos+"%"),r.className="tick-val"},m(t,s){l(t,e,s),a(e,n),l(t,i,s),l(t,r,s),a(r,o),l(t,p,s)},p(t,n){t.ticks&&g(e,"left",n.tick.pos+"%"),t.ticks&&f!==(f=n.renderTickValue(n.tick.val))&&m(o,f),t.ticks&&g(r,"left",n.tick.pos+"%")},d(t){t&&(s(e),s(i),s(r),s(p))}}}function z(t){var e,n,i,r,o,p=(t.ticks.length<=5||0===t.ticks.indexOf(t.tick)||t.ticks.indexOf(t.tick)===t.ticks.length-1)&&V(t);function m(t){return t.ticks.length>5&&t.ticks.length%2!=0&&"50.00"===t.tick.pos?R:t.ticks.length>5&&t.ticks.length%2==0&&(t.tick.pos===t.getNearestTickToPos("33.33")||t.tick.pos===t.getNearestTickToPos("66.66"))?I:void 0}var f=m(t),h=f&&f(t);return{c(){e=c("span"),n=d("."),i=u(),p&&p.c(),r=u(),h&&h.c(),o=d(""),g(e,"left",t.tick.pos+"%"),g(e,"top","-4px"),e.className="tick"},m(t,s){l(t,e,s),a(e,n),l(t,i,s),p&&p.m(t,s),l(t,r,s),h&&h.m(t,s),l(t,o,s)},p(t,n){t.ticks&&g(e,"left",n.tick.pos+"%"),n.ticks.length<=5||0===n.ticks.indexOf(n.tick)||n.ticks.indexOf(n.tick)===n.ticks.length-1?p?p.p(t,n):((p=V(n)).c(),p.m(r.parentNode,r)):p&&(p.d(1),p=null),f===(f=m(n))&&h?h.p(t,n):(h&&h.d(1),(h=f&&f(n))&&(h.c(),h.m(o.parentNode,o)))},d(t){t&&(s(e),s(i)),p&&p.d(t),t&&s(r),h&&h.d(t),t&&s(o)}}}function j(e){for(var n,r,o,d,m,g,f,h,x,v,k=e.dragging&&"range"===e.dragging&&C(e),b=e.dragging&&"min"===e.dragging&&L(e),$=e.dragging&&"max"===e.dragging&&P(e),y=e.ticks,_=[],w=0;w<y.length;w+=1)_[w]=z(S(e,y,w));return{c(){n=c("div"),r=c("section"),o=c("div"),k&&k.c(),d=u(),m=c("div"),b&&b.c(),g=u(),f=c("div"),$&&$.c(),h=u(),x=c("div");for(var i=0;i<_.length;i+=1)_[i].c();this.c=t,o.className="range",o.id="range",m.className="knob",m.id="min",f.className="knob",f.id="max",x.className="scale",n.id="rangeslider",v=[p(o,"mousedown",e.handleDragStart),p(o,"mouseup",e.handleDragEnd),p(m,"mousedown",e.handleDragStart),p(m,"mouseup",e.handleDragEnd),p(f,"mousedown",e.handleDragStart),p(f,"mouseup",e.handleDragEnd)]},m(t,i){l(t,n,i),a(n,r),a(r,o),k&&k.m(o,null),F(()=>e.div0_binding(o,null)),a(r,d),a(r,m),b&&b.m(m,null),F(()=>e.div1_binding(m,null)),a(r,g),a(r,f),$&&$.m(f,null),F(()=>e.div2_binding(f,null)),F(()=>e.section_binding(r,null)),a(n,h),a(n,x);for(var s=0;s<_.length;s+=1)_[s].m(x,null);F(()=>e.div3_binding(x,null)),F(()=>e.div4_binding(n,null))},p(t,e){if(e.dragging&&"range"===e.dragging?k?k.p(t,e):((k=C(e)).c(),k.m(o,null)):k&&(k.d(1),k=null),t.items&&(e.div0_binding(null,o),e.div0_binding(o,null)),e.dragging&&"min"===e.dragging?b?b.p(t,e):((b=L(e)).c(),b.m(m,null)):b&&(b.d(1),b=null),t.items&&(e.div1_binding(null,m),e.div1_binding(m,null)),e.dragging&&"max"===e.dragging?$?$.p(t,e):(($=P(e)).c(),$.m(f,null)):$&&($.d(1),$=null),t.items&&(e.div2_binding(null,f),e.div2_binding(f,null)),t.items&&(e.section_binding(null,r),e.section_binding(r,null)),t.ticks||t.renderTickValue||t.getNearestTickToPos){y=e.ticks;for(var i=0;i<y.length;i+=1){const n=S(e,y,i);_[i]?_[i].p(t,n):(_[i]=z(n),_[i].c(),_[i].m(x,null))}for(;i<_.length;i+=1)_[i].d(1);_.length=y.length}t.items&&(e.div3_binding(null,x),e.div3_binding(x,null)),t.items&&(e.div4_binding(null,n),e.div4_binding(n,null))},i:t,o:t,d(t){t&&s(n),k&&k.d(),e.div0_binding(null,o),b&&b.d(),e.div1_binding(null,m),$&&$.d(),e.div2_binding(null,f),e.section_binding(null,r),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(_,t),e.div3_binding(null,x),e.div4_binding(null,n),i(v)}}}function U(t,e,n){let i,r,o,a,l,s,c,d,u,p,{rmin:m=null,rmax:g=null,controlname:f="rangeslider"}=e,h=0,k=null;const $=v(),y=async()=>{if(void 0===o)return;const t=L.start||m,e=L.end||g;await(T(),b),o.style.left=`${O(t)||"0"}%`,n("min",o),a.style.left=`${O(e)||"100"}%`,n("max",a),E(),l.style.left=o.style.left,n("range",l),l.style.width=`${parseFloat(a.style.left).toFixed(3).slice(0,-1)-parseFloat(o.style.left).toFixed(3).slice(0,-1)}%`,n("range",l)};x(()=>{r.style.width="100%",n("slider",r),o.style.left="0%",n("min",o),a.style.left="100%",n("max",a),l.style.left="0%",n("range",l),l.style.width="100%",n("range",l),s.style.width="100%",n("scale",s)});let _=null;const w=t=>{const e=t.x-c,i=Math.round(e/r.getBoundingClientRect().width*100),s="range"===d.id?parseInt(l.style.width):0;if(h+i>=0&&h+i<=100&&h+i+s<=100){n("dragPos",_=h+i),("min"===d.id&&_<=parseInt(a.style.left)||"max"===d.id&&_>=parseInt(o.style.left)||"range"===d.id)&&F(_)}else N()},F=(t,e=!1)=>{n("snapToTick",u=M(t));const i=e?u:t;"min"===d.id?(o.style.left=`${i}%`,n("min",o),l.style.left=`${i}%`,n("range",l),l.style.width=`${parseFloat(a.style.left).toFixed(3).slice(0,-1)-parseFloat(o.style.left).toFixed(3).slice(0,-1)}%`,n("range",l)):"max"===d.id?(a.style.left=`${i}%`,n("max",a),l.style.width=`${(parseFloat(a.style.left)-parseFloat(o.style.left)).toFixed(3).slice(0,-1)}%`,n("range",l)):(o.style.left=`${i}%`,n("min",o),a.style.left=`${(parseFloat(i)+parseFloat(l.style.width)).toFixed(3).slice(0,-1)}%`,n("max",a),l.style.left=`${i}%`,n("range",l))},N=t=>{k&&(F(_,!0),E(),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",N),n("dragging",k=null),C())},E=()=>{L.start=D(o.style.left),n("selectedRange",L),L.end=D(a.style.left),n("selectedRange",L)},M=t=>P.map(t=>t.pos).reduce((e,n)=>Math.abs(parseFloat(n)-parseFloat(t))<Math.abs(parseFloat(e)-parseFloat(t))?n:e),D=t=>!P||P&&0===P.length?null:P.find(e=>e.pos===M(t)).val,O=t=>!P||P&&0===P.length?null:P.find(e=>e.val===(t=>P.map(t=>t.val).reduce((e,n)=>Math.abs(parseFloat(n)-parseFloat(t))<Math.abs(parseFloat(e)-parseFloat(t))?n:e))(t)).pos,S=t=>{const e=t.substring(0,7),n=t.substring(0,10),i=t.substring(5,10),r=t.substring(11,16);return"h"===p?i+" "+r:"d"===p?n:"m"===p?e:void 0},C=()=>{$("submit",{controlname:f,start:L.start,end:L.end})};let L,P;return t.$set=(t=>{"rmin"in t&&n("rmin",m=t.rmin),"rmax"in t&&n("rmax",g=t.rmax),"controlname"in t&&n("controlname",f=t.controlname)}),t.$$.update=((t={rmin:1,rmax:1})=>{(t.rmin||t.rmax)&&(m||g)&&y(),(t.rmin||t.rmax)&&n("selectedRange",L={start:m,end:g}),(t.rmin||t.rmax)&&n("ticks",P=((t,e)=>{const i=e-t,r=()=>i<=2592e5?(n("scaleUnit",p="h"),36e5):i>2592e5&&i<=7889229e3?(n("scaleUnit",p="d"),864e5):i>7889229e3&&i<=94670778e3?(n("scaleUnit",p="m"),2629743e3):i>94670778e3?(n("scaleUnit",p="m"),2629743e3):void 0,o=Array.from({length:(e-t)/r()+1},(e,n)=>t+n*r()),a=1/(o.length-1)*100;return o.map((t,e)=>({val:t,pos:parseFloat(a*e).toFixed(3).slice(0,-1)}))})(parseInt(m),parseInt(g)))}),{rmin:m,rmax:g,controlname:f,wrapper:i,slider:r,min:o,max:a,range:l,scale:s,dragging:k,handleDragStart:t=>{n("mouseOrig",c=t.x),n("origin",d=t.srcElement||t.originalTarget),n("start",h=parseFloat(d.style.left)),n("dragPos",_=h),document.addEventListener("mousemove",w),document.addEventListener("mouseup",N),n("dragging",k=d.id)},handleDragEnd:N,getNearestTickToPos:M,renderTickValue:t=>S(new Date(t).toISOString()),renderTooltip:t=>{const e=new Date(D(parseFloat(t.style.left).toFixed(3).slice(0,-1))).toISOString();return S(e)},ticks:P,div0_binding:function(t,e){n("range",l=t)},div1_binding:function(t,e){n("min",o=t)},div2_binding:function(t,e){n("max",a=t)},section_binding:function(t,e){n("slider",r=t)},div3_binding:function(t,e){n("scale",s=t)},div4_binding:function(t,e){n("wrapper",i=t)}}}"undefined"!=typeof HTMLElement&&(O=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){var e,n;n=!0,(e=this).$$&&(i(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});customElements.define("range-slider",class extends O{constructor(t){super(),this.shadowRoot.innerHTML="<style>:host{all:initial;display:block;contain:style}*{font-family:'Menlo', monospace}#rangeslider{position:relative;width:90%}section{background:#f0f0f0;height:4px;border-radius:10px;border:1px solid darkgrey}section{position:relative}section{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.knob{position:absolute;top:-8px;z-index:5;background:#0b003a}.knob{width:10px;height:20px}#min{border-bottom-left-radius:20px;border-top-left-radius:20px;transform:translate(-10px)}#min:hover{transform:translate(-10px) scale(1.2)}#min:active{transform:translate(-10px) scale(1.5)}#max{border-bottom-right-radius:20px;border-top-right-radius:20px}#max:hover{transform:scale(1.2)}#max:active{transform:scale(1.5)}.range{position:absolute;height:6px;top:-1px;background:#0b003a}#min,#max,#range{transition:all .05s linear}#min:hover,#max:hover,#range:hover{box-shadow:0 0 5px 2px rgba(11, 0, 58, 0.2)}#min:active,#max:active,#range:active{box-shadow:0 0 5px 2px rgba(11, 0, 58, 0.4)}.scale{position:absolute;top:14px}.tick,.tick-val{position:absolute;top:4px;transform:translateX(-50%) scale(0.6)}.tick,.tick-val{font-family:'Menlo', monospace}.tick-val{white-space:nowrap}.tooltip{position:relative;top:-16px;left:-28px;display:flex;justify-content:center;background:#0b003a}.tooltip{border-radius:10px;width:70px}.tooltip>span{font-family:'Menlo', monospace;font-size:8px;color:white;padding:2px}.range>.tooltip{padding:0.1rem;left:5%;z-index:5;transform:scale(1.3)}.tooltip-rmin{top:-30px}.tooltip-rmax{top:-2px}.tooltip{opacity:0;transition:opacity .2s ease-in-out}.knob:active .tooltip:not(:active){opacity:1}.range:active .tooltip:not(:active){opacity:1}@media(max-width: 800px){}</style>",D(this,{target:this.shadowRoot},U,j,o,["rmin","rmax","controlname"]),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),E()))}static get observedAttributes(){return["rmin","rmax","controlname"]}get rmin(){return this.$$.ctx.rmin}set rmin(t){this.$set({rmin:t}),E()}get rmax(){return this.$$.ctx.rmax}set rmax(t){this.$set({rmax:t}),E()}get controlname(){return this.$$.ctx.controlname}set controlname(t){this.$set({controlname:t}),E()}})}();
//# sourceMappingURL=range-slider.js.map
