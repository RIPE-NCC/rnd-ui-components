!function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e)}function a(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function u(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function d(t){return document.createTextNode(t)}function m(){return d(" ")}function p(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function f(t,n,e){null==e?t.removeAttribute(n):t.setAttribute(n,e)}function h(t,n,e){t.classList[e?"add":"remove"](n)}let g;function $(t){g=t}function b(){const t=g;return(n,e)=>{const r=t.$$.callbacks[n];if(r){const o=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);r.slice().forEach(n=>{n.call(t,o)})}}}const x=[],v=Promise.resolve();let y=!1;const w=[],S=[],_=[];function E(t){S.push(t)}function k(){const t=new Set;do{for(;x.length;){const t=x.shift();$(t),z(t.$$)}for(;w.length;)w.shift()();for(;S.length;){const n=S.pop();t.has(n)||(n(),t.add(n))}}while(x.length);for(;_.length;)_.pop()();y=!1}function z(t){t.fragment&&(t.update(t.dirty),r(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(E))}function A(t,n){t.$$.dirty||(x.push(t),y||(y=!0,v.then(k)),t.$$.dirty={}),t.$$.dirty[n]=!0}function C(i,c,s,a,l,u){const d=g;$(i);const m=c.props||{},p=i.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:e(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(d?d.$$.context:[]),callbacks:e(),dirty:null};let f=!1;var h;p.ctx=s?s(i,m,(t,n)=>{p.ctx&&l(p.ctx[t],p.ctx[t]=n)&&(p.bound[t]&&p.bound[t](n),f&&A(i,t))}):m,p.update(),f=!0,r(p.before_render),p.fragment=a(p.ctx),c.target&&(c.hydrate?p.fragment.l((h=c.target,Array.from(h.childNodes))):p.fragment.c(),c.intro&&i.$$.fragment.i&&i.$$.fragment.i(),function(t,e,i){const{fragment:c,on_mount:s,on_destroy:a,after_render:l}=t.$$;c.m(e,i),E(()=>{const e=s.map(n).filter(o);a?a.push(...e):r(e),t.$$.on_mount=[]}),l.forEach(E)}(i,c.target,c.anchor),k()),$(d)}let M;function T(t){var n,e,r=t.error?"[invalid input]":"[enter to submit, esc to cancel]";return{c(){n=l("span"),e=d(r),h(n,"error",t.error)},m(t,r){s(t,n,r),c(n,e)},p(t,o){var i,c;t.error&&r!==(r=o.error?"[invalid input]":"[enter to submit, esc to cancel]")&&(c=""+(c=r),(i=e).data!==c&&(i.data=c)),t.error&&h(n,"error",o.error)},d(t){t&&a(n)}}}function F(n){var e,r,o,i,l,d;return{c(){e=u("svg"),r=u("g"),o=u("g"),i=u("path"),l=u("path"),f(i,"d","M64.5,122.6c32,0,58.1-26,58.1-58.1S96.5,6.4,64.5,6.4S6.4,32.5,6.4,64.5S32.5,122.6,64.5,122.6z M64.5,14.6    c27.5,0,49.9,22.4,49.9,49.9S92,114.4,64.5,114.4S14.6,92,14.6,64.5S37,14.6,64.5,14.6z"),f(l,"d","m42.7,85.7c0.8,0.8 1.8,1.2 2.9,1.2s2.1-0.4 2.9-1.2l16-16 16,16c0.8,0.8 1.8,1.2 2.9,1.2s2.1-0.4 2.9-1.2c1.6-1.6 1.6-4.2 0-5.8l-16-16 16-16c1.6-1.6 1.6-4.2 0-5.8s-4.2-1.6-5.8,0l-16,16-16-16c-1.6-1.6-4.2-1.6-5.8,0-1.6,1.6-1.6,4.2 0,5.8l16,16-16,16c-1.6,1.6-1.6,4.2-1.42109e-14,5.8z"),f(e,"id","cancel"),f(e,"width","24px"),f(e,"viewBox","0 0 129 129"),f(e,"enable-background","new 0 0 129 129"),d=p(e,"click",n.cancelEdit)},m(t,n){s(t,e,n),c(e,r),c(r,o),c(o,i),c(o,l)},p:t,d(t){t&&a(e),d()}}}function L(n){var e,r,o,i,l,d;return{c(){e=u("svg"),r=u("g"),o=u("g"),i=u("path"),l=u("path"),f(i,"d","M64.5,122.3c32,0,57.9-26,57.9-57.9c0-32-26-57.9-57.9-57.9S6.6,32.4,6.6,64.4C6.6,96.3,32.5,122.3,64.5,122.3z     M64.5,14.6c27.5,0,49.8,22.3,49.8,49.8c0,27.5-22.3,49.8-49.8,49.8S14.7,91.8,14.7,64.4C14.7,36.9,37,14.6,64.5,14.6z"),f(l,"d","m61.8,71.2h19.3c2.3,0 4.1-1.8 4.1-4.1 0-2.3-1.8-4.1-4.1-4.1h-15.2v-23.8c0-2.3-1.8-4.1-4.1-4.1s-4.1,1.8-4.1,4.1v27.9c0,2.3 1.8,4.1 4.1,4.1z"),f(e,"id","edit"),f(e,"width","24px"),f(e,"viewBox","0 0 129 129"),f(e,"enable-background","new 0 0 129 129"),d=p(e,"click",n.startEdit)},m(t,n){s(t,e,n),c(e,r),c(r,o),c(o,i),c(o,l)},p:t,d(t){t&&a(e),d()}}}function N(n){var e,o,i,u,d,h,g,$=(n.changed||n.error)&&T(n);function b(t){return t.changed?F:L}var x=b(n),v=x(n);return{c(){e=l("section"),$&&$.c(),o=m(),i=l("div"),u=l("input"),d=m(),h=l("div"),v.c(),this.c=t,f(u,"type","text"),i.className="input box",h.className="icons box",g=[p(u,"input",n.input_input_handler),p(u,"keydown",n.handleKey)]},m(t,r){var a;s(t,e,r),$&&$.m(e,null),c(e,o),c(e,i),c(i,u),u.value=n.isoString,a=(()=>n.input_binding(u,null)),w.push(a),c(e,d),c(e,h),v.m(h,null)},p(t,n){n.changed||n.error?$?$.p(t,n):(($=T(n)).c(),$.m(e,o)):$&&($.d(1),$=null),t.isoString&&u.value!==n.isoString&&(u.value=n.isoString),t.items&&(n.input_binding(null,u),n.input_binding(u,null)),x===(x=b(n))&&v?v.p(t,n):(v.d(1),(v=x(n))&&(v.c(),v.m(h,null)))},i:t,o:t,d(t){t&&a(e),$&&$.d(),n.input_binding(null,u),v.d(),r(g)}}}function j(t,n,e){let r,{timestamp:o=(new Date).getTime().toString(),controlname:i="iso-date"}=n,c=!1;const s=t=>{try{return new Date(parseInt(t)).toISOString().replace(/\.[0-9]{3}/g,"")}catch(t){return e("error",c=!0),""}},a=b(),l=()=>{r.blur(),d&&e("isoString",u=s(o)),e("error",c=!1)};let u,d;return t.$set=(t=>{"timestamp"in t&&e("timestamp",o=t.timestamp),"controlname"in t&&e("controlname",i=t.controlname)}),t.$$.update=((t={timestamp:1,isoString:1})=>{t.timestamp&&e("isoString",u=s(o)),(t.isoString||t.timestamp)&&e("changed",d=u!==s(o))}),{timestamp:o,controlname:i,elInput:r,error:c,startEdit:()=>{r.select()},cancelEdit:l,handleKey:t=>{13===t.which&&(()=>{u.match(/^.*Z{1}$/)||e("isoString",u+="Z");const t=new Date(u).getTime();u.match(/^(\d{4})(-(\d{2}))??(-(\d{2}))??(T(\d{2}):(\d{2})(:(\d{2}))??(\.(\d+))??(([+-]{1}\d{2}:?\d{2})|Z)??)??$/gm)&&t?(e("error",c=!1),r.blur(),e("timestamp",o=t),a("submit",{timestamp:t,controlname:i})):e("error",c=!0)})(),27===t.which&&l()},isoString:u,changed:d,input_input_handler:function(){u=this.value,e("isoString",u)},input_binding:function(t,n){e("elInput",r=t)}}}"undefined"!=typeof HTMLElement&&(M=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,n,e){this[t]=e}$destroy(){var n,e;e=!0,(n=this).$$&&(r(n.$$.on_destroy),n.$$.fragment.d(e),n.$$.on_destroy=n.$$.fragment=null,n.$$.ctx={}),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}});customElements.define("iso-date",class extends M{constructor(t){super(),this.shadowRoot.innerHTML='<style>section{font-family:\'Menlo\', monospace;font-size:14px;box-sizing:border-box;display:flex;flex:1;position:relative;width:220px;min-width:220px;max-width:220px;background-color:#FAFAFA;border:1px solid #bdc3c7}.box{height:32px;display:flex;align-items:center;justify-content:center}.input{flex:0.85}.icons{justify-content:center;flex:0.15}input[type="text"],input[type="text"]:invalid{background-color:#FAFAFA;border:none;font-family:inherit;font-size:inherit;box-shadow:none;outline:none;width:100%;margin-bottom:0;padding:6px}svg{transition:all .2s ease-in-out;transform:scale(0.9);fill:#404040}svg:hover{transform:scale(1)}#edit:hover{fill:darkblue}#cancel:hover{fill:red}span{position:absolute;font-size:10px;top:32px}.error{font-weight:600;color:red}</style>',C(this,{target:this.shadowRoot},j,N,i,["timestamp","controlname"]),t&&(t.target&&s(t.target,this,t.anchor),t.props&&(this.$set(t.props),k()))}static get observedAttributes(){return["timestamp","controlname"]}get timestamp(){return this.$$.ctx.timestamp}set timestamp(t){this.$set({timestamp:t}),k()}get controlname(){return this.$$.ctx.controlname}set controlname(t){this.$set({controlname:t}),k()}})}();
//# sourceMappingURL=iso-date.js.map
